### Recommended Technology Stack for **OMBM** (v 1.0)

| Layer                                | Primary Choice                                                                                                   | Why it fits OMBM                                                                                                                                                                                                        | Key Libraries / Tools                                         |
| ------------------------------------ | ---------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------- |
| **Language**                         | **Python 3.11+**                                                                                                 | • Fastest path to functioning prototype — rich ecosystem for web-scraping, LLM calls, and macOS automation.<br>• Easy Homebrew distribution via `pipx` or bottled formula.<br>• Large user base → low maintenance risk. | –––                                                           |
| **CLI Framework**                    | **Typer** (built on Click)                                                                                       | Zero-boilerplate commands, native async support, baked-in help text & autocompletion.                                                                                                                                   | `typer`, `rich` (for colored tree output)                     |
| **Bookmark Access (macOS only)**     | `osascript` shell calls to AppleScript *or* `py-applescript`                                                     | Reliable, no external dependency; works on all macOS versions.                                                                                                                                                          | `"tell application \"Safari\" …"` scripts stored as templates |
| **Web-Scraping / Content Capture**   | 1. **Playwright** (headless WebKit)<br>2. Fallback: `httpx` + `readability-lxml`                                 | Playwright handles dynamic pages & fetches canonical title/description; WebKit driver is native to Safari.  Fallback keeps dependency footprint small when JS not needed.                                               | `playwright`, `httpx`, `readability-lxml`, `beautifulsoup4`   |
| **LLM Integration**                  | **OpenAI Python SDK**                                                                                            | Single call for title/description + separate batch call for taxonomy.  Supports streaming & async batching.                                                                                                             | `openai>=1.0.0`                                               |
| **Concurrency / Task Orchestration** | **`asyncio` + `anyio`**                                                                                          | Allows parallel scraping + LLM calls while staying pure-Python; concurrency flag maps to semaphore limit.                                                                                                               | `anyio`, built-in `asyncio`                                   |
| **Caching & State**                  | **SQLite (via `aiosqlite`)**                                                                                     | Local file, no server setup; use for:<br>• per-URL scrape cache<br>• LLM response cache<br>• undo log for `--save`                                                                                                      | `aiosqlite`, `sqlalchemy` (optional)                          |
| **Output Formatting**                | **Rich Tree**                                                                                                    | Nicest tree rendering on terminal without extra work.                                                                                                                                                                   | `rich.tree`, `rich.console`                                   |
| **Packaging & Distribution**         | • **PyPI** (for `pipx install ombm`)<br>• **Homebrew** formula wrapping `pipx` or bottled `shiv`/`pynsist` build | Lets macOS users `brew install ombm` while still leveraging Python.                                                                                                                                                     | `setuptools`/`hatch`, GitHub Actions for CI-release           |
| **Code Quality / Testing**           | `ruff`, `mypy`, `pytest-asyncio`                                                                                 | Fast linting, static type checks, async-aware tests.                                                                                                                                                                    | –––                                                           |

---

#### Why Python is the lead recommendation

1. **Safari Automation friction-free** – AppleScript via `osascript` is one-liner-friendly in Python.
2. **LLM SDK maturity** – OpenAI’s official SDK and error-handling examples are Python-first.
3. **Rapid iteration** – natural language parsing & quick prompt experimentation are simpler.
4. **Community libraries** – Playwright, Rich, Typer drastically cut boilerplate.
